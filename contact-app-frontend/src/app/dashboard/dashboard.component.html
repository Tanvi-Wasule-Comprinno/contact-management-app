<app-navbar></app-navbar>
<!-- existing dashboard UI below -->

<div class="container mt-4">

  <!-- HEADER -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold"> My Contacts</h3>
    <button class="btn btn-primary"
            data-bs-toggle="modal"
            data-bs-target="#addContactModal"
            (click)="resetForm()">
      + Add Contact
    </button>
  </div>

  <!-- CONTACTS TABLE -->
  <div class="card shadow-sm" *ngIf="contacts.length > 0">
    <table class="table table-hover mb-0">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Phone</th>
          <th style="width: 160px;">Actions</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let c of contacts">
          <td>{{ c.name }}</td>
          <td>{{ c.email }}</td>
          <td>{{ c.phone }}</td>
          <td>
            <button
              class="btn btn-sm btn-outline-primary me-2"
              (click)="openEditModal(c)">
               Edit
            </button>

            <button
              class="btn btn-sm btn-outline-danger"
              (click)="deleteContact(c.id)">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
<!-- PAGINATION -->
<div class="d-flex justify-content-between align-items-center mt-3"
     *ngIf="totalPages > 1">

  <button class="btn btn-outline-secondary"
          (click)="previousPage()"
          [disabled]="page === 0">
    ⬅ Previous
  </button>

  <span class="fw-bold">
    Page {{ page + 1 }} of {{ totalPages }}
  </span>

  <button class="btn btn-outline-secondary"
          (click)="nextPage()"
          [disabled]="page === totalPages - 1">
    Next ➡
  </button>

</div>

  <!-- EMPTY STATE -->
  <div *ngIf="contacts.length === 0"
       class="text-center p-5 border rounded bg-light shadow-sm">
    <h5>No contacts found</h5>
    <button class="btn btn-outline-primary mt-3"
            data-bs-toggle="modal"
            data-bs-target="#addContactModal"
            (click)="resetForm()">
      + Add Contact
    </button>
  </div>
</div>

<!-- ADD / EDIT CONTACT MODAL -->
<div class="modal fade" id="addContactModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <!-- FORM -->
      <form #contactForm="ngForm" (ngSubmit)="saveContact()">

        <div class="modal-header">
          <h5 class="modal-title">
            {{ editing ? ' Edit Contact' : ' Add Contact' }}
          </h5>
          <button type="button"
                  class="btn-close"
                  data-bs-dismiss="modal">
          </button>
        </div>

        <div class="modal-body">

          <!-- NAME -->
          <div class="mb-3">
            <label class="form-label">Name</label>
            <input class="form-control"
                   name="name"
                   required
                   [(ngModel)]="newContact.name">
          </div>

          <!-- EMAIL -->
         <!-- EMAIL -->
<div class="mb-3">
  <label class="form-label">Email</label>

  <input class="form-control"
         type="email"
         name="email"
         required
         email
         [(ngModel)]="newContact.email"
         #email="ngModel">

  <!-- Validation messages -->
  <div class="text-danger mt-1" *ngIf="email.invalid && email.touched">
    <div *ngIf="email.errors?.['required']">
      Email is required
    </div>
    <div *ngIf="email.errors?.['email']">
      Please enter a valid email address
    </div>
  </div>
</div>


          <!-- PHONE -->
          <div class="mb-3">
            <label class="form-label">Phone</label>
            <input class="form-control"
                   name="phone"
                   required
                   pattern="^[0-9]{10}$"
                   [(ngModel)]="newContact.phone">
            <small class="text-danger">
              Phone number must be exactly 10 digits
            </small>
          </div>

        </div>

        <div class="modal-footer">
          <button type="button"
                  class="btn btn-secondary"
                  data-bs-dismiss="modal">
            Cancel
          </button>

          <button type="submit"
                  class="btn btn-primary"
                  [disabled]="contactForm.invalid">
            {{ editing ? 'Update Contact' : 'Save Contact' }}
          </button>
        </div>

      </form>

    </div>
  </div>
</div>
